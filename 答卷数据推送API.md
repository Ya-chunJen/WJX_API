
如果您需要将答卷数据备份到自己的服务器中，可以使用本接口，将提交的答卷Post到您指定的URL，并保存。此接口为尊享版专属功能。

## 一、数据推送API
使用该接口，可以将填写者提交的数据推送到指定的URL，推送数据的格式是JSON，您需要提供接受数据的URL，并且在此URL上写程序接收数据。

数据推送格式：JSON

数据PostURL：由您指定，但是必须为外网可访问的地址，如：http://wjxapi.paperol.cn/getapi.aspx （Demo地址）

推送服务器IP：120.26.38.11（可设置此IP为白名单，保证传输安全）

推送数据示例：

`
{"activity":"5657754","name":"问卷名称","timetaken":"528","submittime":"2016-08-23 10:01:59", "q1":"1","q2": "测试","q3","1,2","joinid":"101812480275","totalvalue":"15"}
`


推送参数说明：


| 参数名 | 示例 | 说明 |
| --- | --- | --- |
| activity | "activity":"5657754" | 问卷ID |
| name | "name":"问卷名称" | 问卷的标题名称 |
| timetaken | "timetaken":"528" | 填写者填写耗时，单位：秒 |
| submittime | "submittime":"2016-08-23 10:01:59" | 填写者提交的时间点 |
| joinid | "joinid":"101812480275" | 填写者填写提交的流水号 |
| totalvalue | "totalvalue":"15" | 考试问卷：总得分 |
| sojumpparm | "sojumpparm":"A123456" | 使用自定义链接参数话，带入的参数 |
| q1 | "q1":"1" | 表示第1题，值“1”表示用户选择了第一个选项 |
| q2 | "q2": "测试" | 表示第2题，值“测试”表示用户输入的内容 |
| q3 | "q3","1,2" | 表示第3题，值“1,2”表示用户同时选择了第1个和第2个选项 |
| thirdusername | "thirdusername":"00139367" | 用户体系中的用户ID |
| realname | "realname":"张三" | 用户体系中的用户姓名 |
| relDept | "relDept":"客服部" | 用户体系中的部门 |
| relExt | "relExt":"工程师" | 用户体系中的附加属性 |

注意事项：

（1）推送失败，系统会自动重新推送。如果1分钟内连续出错超过3次，该问卷的数据推送过程将被暂停30分钟；

（2）如果使用了数据推送API，同时也使用了自定义链接参数，sojumpparm参数带进来的内容也会推送，无需使用“自定义链接参数”功能中的页面跳转传递参数。

## 二、获取题目选项对应文本内容
在数据推送时，为保证推送速度及成功率，只会推送题目及选项对应的序号，不会推送题目及选项的文本内容，如需获取题目选项序号和文本的对应值，可以使用以下接口获取：

获取接口：http://www.wjx.cn/handler/IllustrateApi.ashx?activityID=问卷ID

序号解释：

1.q1、q2、q3以此类推，代表每个题目的题干文字；

2.选择类的题目，q1#1、q1#2、q1#3分别代表第一个题的第一个、第二个、第三个选项；

3.多项填空题，只提供题干整体文本；

4.如果是矩阵单选或矩阵多选题，q1是题干文本，q1_1,q1_2是矩阵题的第一个、第二个左行标题，q1_1#1,q1_1#2分别是矩阵题第一个左行标题的，第一个选项、第二个选项内容。

5.矩阵填空，数据推送的时候直接推送的是选项内容，无需获取选项文本。类似的还有矩阵滑动条、表格下拉框、表格数值、表格文本题。

6.考试问卷，不包含正确答案的信息。


获取接口（JSON格式）：http://www.wjx.cn/handler/IllustrateApi.ashx?activityID=问卷ID&JSON=1

## 三、数据推送DEMO

### 1、检测测试环境是否在线
因为测试DEOM搭建在本地办公环境，并非24小时在线。所以首先需要打开这个地址：http://wjxapi.paperol.cn/index.html 如果页面可以正常访问，表示测试DEMO正常。如果页面无法正常访问，表示测试DEMO处于离线状态，可以联系客服恢复测试DEMO。

### 2、设置测试推送地址
将该地址：http://wjxapi.paperol.cn/getapi.aspx 放在数据推送的目标地址。注意，该地址仅用于测试，测试数据会定期删除，请勿用于实际使用环境。

### 3、查看推送结果
访问该地址：http://wjxapi.paperol.cn/data.txt 可以查看测试DEMO获取到的数据详情。


### 注意：
测试环境，请勿推送敏感数据。
